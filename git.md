# Git

## Основы Work area / stage area / commit

Каждый файл в вашем рабочем каталоге может находиться в одном из двух состояний: под версионным контролем (отслеживаемые) и нет (неотслеживаемые). Отслеживаемые файлы — это те файлы, которые были в последнем слепке состояния проекта (snapshot); они могут быть неизменёнными, изменёнными или подготовленными к коммиту (staged). Неотслеживаемые файлы — это всё остальное, любые файлы в вашем рабочем каталоге, которые не входили в ваш последний слепок состояния и не подготовлены к коммиту. 

![](media/gitLifeCycle.png)

![reset workflow](https://git-scm.com/book/en/v2/images/reset-workflow.png)

## reset(--soft –hard –mixed) vs checkout

![reset checkout](https://git-scm.com/book/en/v2/images/reset-checkout.png)

|                                          | HEAD | Индекс | Рабочий Каталог | Сохранность РК? |
| ---------------------------------------- | ---- | ------ | --------------- | --------------- |
| **На уровне коммитов (без указания путей)** |      |        |                 |                 |
| `reset --soft [commit]`                  | REF  | NO     | NO              | YES             |
| `reset [commit]`                         | REF  | YES    | NO              | YES             |
| `reset --hard [commit]`                  | REF  | YES    | YES             | **NO**          |
| `checkout [commit]`                      | HEAD | YES    | YES             | YES             |
| **На уровне файлов (с указанием путей)** |      |        |                 |                 |
| `reset (commit) [file]`                  | NO   | YES    | NO              | YES             |
| `checkout (commit) [file]`               | NO   | YES    | YES             | **NO**          |

## merge и rebase

**merge** - слияние двух веток, в новом коммите

**rebase** - перебазирование ветки таким образом, чтобы история выглядеа так чтобы ее коммиты выходили из заданного(как правило послденего) . Отребейзенные коммиты меняю свою дату и хеш.

![](media/gitMergeRebase.jpeg)

**rebase -i **- интеркативын ребайз, позволяет сквошить(скливать) комммиты, менять их местами, выкидывать нужные, менять описания.

**rebase onto** 

Вы можете взять изменения из ветки `client`, которых нет в `server` (C8 и C9), и применить их на ветке `master` при помощи опции `--onto` команды `git rebase`:

```
$ git rebase --onto master server client
```

По сути, это указание “переключиться на ветку `client`, взять изменения от общего предка веток `client` и `server` и повторить их на `master`”. Это немного сложно; но результат, показанный на рисунке 3-32, довольно классный.

![](media/gitRebaseOnto.png)

**cherry-pick** - просто пытается вставить выбарнный коммит в нужную ветку

## reflog

Во время вашей работы Git записывает все изменения HEAD. Каждый раз при переключении веток и коммите, добавляется запись в **reflog** Таким образом reflog поможет найти нам проебавшиеся комиты, однако он не вечен, так как есть сборщик мусора и данные хранятся там не вечно.

## Дополнительно

https://githowto.com/ru

https://git-scm.com/book/ru/v2

https://habr.com/company/intel/blog/344962/

https://eax.me/git-commands/

https://github.com/nicothin/web-development/tree/master/git